set -o nounset
set -o errexit

xrdb -merge ~/.Xresources

# Run all scripts in ~/.config/Xsession/conf.d
SESSIONS="$HOME/.config/Xsession/conf.d"
if [ -d "$SESSIONS" ]; then
  SESSIONFILES=$(run-parts --list $SESSIONS)
  if [ -n "$SESSIONFILES" ]; then
    for SESSIONFILE in $SESSIONFILES; do
      source $SESSIONFILE
    done
  fi
fi

# Sets desktop background color
xsetroot -solid #002b36

xmodmap ~/.xmodmap 2>/dev/null || true
run-one xcape -d -t 250 -e 'Control_L=Escape' &
run-one tray &

killall -q notify-osd || true
run-one statnot ~/.config/statnot/config.py &

killall -q gnome-screensaver || true
xscreensaver -no-splash &

run-one nm-applet &
run-one email_notifier.py &
